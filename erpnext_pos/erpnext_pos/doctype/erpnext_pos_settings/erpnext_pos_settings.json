{
  "doctype": "DocType",
  "name": "ERPNext POS Settings",
  "module": "ERPNext POS",
  "custom": 0,
  "issingle": 1,
  "document_type": "Setup",
  "engine": "InnoDB",
  "quick_entry": 0,
  "field_order": [
    "section_api",
    "enable_api",
    "allow_discovery",
    "allow_client_secret_response",
    "allowed_api_roles_table",
    "allowed_api_roles",
    "allowed_api_users",
    "section_access_control",
    "user_role_bindings",
    "section_permission_manager",
    "permission_matrix_doctype",
    "permission_matrix_role",
    "permission_matrix_if_owner",
    "permission_matrix_html",
    "api_version",
    "column_break_sync",
    "default_sync_page_size",
    "bootstrap_invoice_days",
    "recent_paid_invoice_days",
    "section_inventory",
    "enable_inventory_alerts",
    "inventory_alert_default_limit",
    "inventory_alert_critical_ratio",
    "inventory_alert_low_ratio",
    "inventory_alert_rules"
  ],
  "fields": [
    {
      "fieldname": "section_api",
      "fieldtype": "Section Break",
      "label": "API"
    },
    {
      "fieldname": "enable_api",
      "fieldtype": "Check",
      "label": "Enable API",
      "default": 1
    },
    {
      "fieldname": "allow_discovery",
      "fieldtype": "Check",
      "label": "Allow Discovery Endpoint",
      "default": 1
    },
    {
      "fieldname": "allow_client_secret_response",
      "fieldtype": "Check",
      "label": "Allow Returning Client Secret",
      "default": 0,
      "description": "Disable in production mobile deployments."
    },
    {
      "fieldname": "allowed_api_roles_table",
      "fieldtype": "Table MultiSelect",
      "label": "Allowed API Roles",
      "options": "ERPNext POS API Role",
      "description": "Select roles allowed to call protected ERPNext POS API endpoints."
    },
    {
      "fieldname": "allowed_api_roles",
      "fieldtype": "Data",
      "label": "Allowed API Roles (Legacy)",
      "default": "System Manager,POS,POS User",
      "description": "Legacy fallback. Use Allowed API Roles table above.",
      "hidden": 1,
      "read_only": 1
    },
    {
      "fieldname": "allowed_api_users",
      "fieldtype": "Table MultiSelect",
      "label": "Allowed API Users",
      "options": "ERPNext POS API User",
      "description": "Optional explicit user allow-list. Users listed here are allowed even if role checks fail."
    },
    {
      "fieldname": "section_access_control",
      "fieldtype": "Section Break",
      "label": "Access Control"
    },
    {
      "fieldname": "user_role_bindings",
      "fieldtype": "Table",
      "label": "User Role Assignments",
      "options": "ERPNext POS User Role",
      "description": "Assign one or many roles per user from this single POS settings form."
    },
    {
      "fieldname": "section_permission_manager",
      "fieldtype": "Section Break",
      "label": "Permission Manager (POS)"
    },
    {
      "fieldname": "permission_matrix_doctype",
      "fieldtype": "Link",
      "label": "DocType",
      "options": "DocType",
      "description": "Select document type to manage permissions in matrix mode."
    },
    {
      "fieldname": "permission_matrix_role",
      "fieldtype": "Link",
      "label": "Role Filter",
      "options": "Role"
    },
    {
      "fieldname": "permission_matrix_if_owner",
      "fieldtype": "Check",
      "label": "New Rules: Only If Creator",
      "default": 0,
      "description": "Applied when using Add Rule from this form."
    },
    {
      "fieldname": "permission_matrix_html",
      "fieldtype": "HTML",
      "label": "Permission Matrix"
    },
    {
      "fieldname": "api_version",
      "fieldtype": "Data",
      "label": "API Version",
      "default": "v1",
      "read_only": 1
    },
    {
      "fieldname": "column_break_sync",
      "fieldtype": "Column Break"
    },
    {
      "fieldname": "default_sync_page_size",
      "fieldtype": "Int",
      "label": "Default Sync Page Size",
      "default": "50"
    },
    {
      "fieldname": "bootstrap_invoice_days",
      "fieldtype": "Int",
      "label": "Bootstrap Invoice Days",
      "default": "90"
    },
    {
      "fieldname": "recent_paid_invoice_days",
      "fieldtype": "Int",
      "label": "Recent Paid Invoice Days",
      "default": "7"
    },
    {
      "fieldname": "section_inventory",
      "fieldtype": "Section Break",
      "label": "Inventory Alerts"
    },
    {
      "fieldname": "enable_inventory_alerts",
      "fieldtype": "Check",
      "label": "Enable Inventory Alerts",
      "default": 1
    },
    {
      "fieldname": "inventory_alert_default_limit",
      "fieldtype": "Int",
      "label": "Default Alert Limit",
      "default": "20"
    },
    {
      "fieldname": "inventory_alert_critical_ratio",
      "fieldtype": "Float",
      "label": "Critical Ratio",
      "default": "0.35"
    },
    {
      "fieldname": "inventory_alert_low_ratio",
      "fieldtype": "Float",
      "label": "Low Ratio",
      "default": "1.0"
    },
    {
      "fieldname": "inventory_alert_rules",
      "fieldtype": "Table",
      "label": "Alert Rules",
      "options": "ERPNext POS Inventory Alert Rule"
    }
  ],
  "permissions": [
    {
      "role": "System Manager",
      "read": 1,
      "write": 1,
      "create": 1
    },
    {
      "role": "POS",
      "read": 1,
      "write": 1
    },
    {
      "role": "POS User",
      "read": 1,
      "write": 1
    }
  ]
}

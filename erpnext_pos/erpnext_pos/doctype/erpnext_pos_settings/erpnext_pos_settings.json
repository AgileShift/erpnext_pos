{
  "doctype": "DocType",
  "name": "ERPNext POS Settings",
  "module": "ERPNext POS",
  "custom": 0,
  "issingle": 1,
  "document_type": "Setup",
  "engine": "InnoDB",
  "quick_entry": 0,
  "field_order": [
    "section_api",
    "enable_api",
    "allow_discovery",
    "allow_client_secret_response",
    "api_version",
    "section_access_control",
    "allowed_api_roles_table",
    "allowed_api_roles",
    "allowed_api_users",
    "user_role_bindings",
    "section_sync",
    "default_sync_page_size",
    "bootstrap_invoice_days",
    "recent_paid_invoice_days",
    "section_inventory",
    "enable_inventory_alerts",
    "inventory_alert_default_limit",
    "inventory_alert_critical_ratio",
    "inventory_alert_low_ratio",
    "inventory_alert_rules"
  ],
  "fields": [
    {
      "fieldname": "section_api",
      "fieldtype": "Section Break",
      "label": "API"
    },
    {
      "fieldname": "enable_api",
      "fieldtype": "Check",
      "label": "Enable API",
      "default": 1
    },
    {
      "fieldname": "allow_discovery",
      "fieldtype": "Check",
      "label": "Allow Discovery Endpoint",
      "default": 1
    },
    {
      "fieldname": "allow_client_secret_response",
      "fieldtype": "Check",
      "label": "Allow Returning Client Secret",
      "default": 0,
      "description": "Disable in production mobile deployments."
    },
    {
      "fieldname": "allowed_api_roles_table",
      "fieldtype": "Table MultiSelect",
      "label": "Allowed API Roles",
      "options": "ERPNext POS API Role",
      "description": "Select roles allowed to call protected ERPNext POS API endpoints."
    },
    {
      "fieldname": "allowed_api_roles",
      "fieldtype": "Data",
      "label": "Allowed API Roles (Legacy)",
      "default": "System Manager,POS,POS User",
      "description": "Legacy fallback. Use Allowed API Roles table above.",
      "hidden": 1,
      "read_only": 1
    },
    {
      "fieldname": "allowed_api_users",
      "fieldtype": "Table MultiSelect",
      "label": "Allowed API Users",
      "options": "ERPNext POS API User",
      "description": "Optional explicit user allow-list. Users listed here are allowed even if role checks fail."
    },
    {
      "fieldname": "section_access_control",
      "fieldtype": "Section Break",
      "label": "Access Control"
    },
    {
      "fieldname": "user_role_bindings",
      "fieldtype": "Table",
      "label": "User Role Assignments",
      "options": "ERPNext POS User Role",
      "description": "Assign one or many roles per user from this single POS settings form."
    },
    {
      "fieldname": "api_version",
      "fieldtype": "Data",
      "label": "API Version",
      "default": "v1",
      "read_only": 1
    },
    {
      "fieldname": "section_sync",
      "fieldtype": "Section Break",
      "label": "Sync"
    },
    {
      "fieldname": "default_sync_page_size",
      "fieldtype": "Int",
      "label": "Default Sync Page Size",
      "default": "50"
    },
    {
      "fieldname": "bootstrap_invoice_days",
      "fieldtype": "Int",
      "label": "Bootstrap Invoice Days",
      "default": "90"
    },
    {
      "fieldname": "recent_paid_invoice_days",
      "fieldtype": "Int",
      "label": "Recent Paid Invoice Days",
      "default": "7"
    },
    {
      "fieldname": "section_inventory",
      "fieldtype": "Section Break",
      "label": "Inventory Alerts"
    },
    {
      "fieldname": "enable_inventory_alerts",
      "fieldtype": "Check",
      "label": "Enable Inventory Alerts",
      "default": 1,
      "description": "If disabled, API skips stock alert calculation."
    },
    {
      "fieldname": "inventory_alert_default_limit",
      "fieldtype": "Int",
      "label": "Default Alert Limit",
      "default": "20",
      "description": "Maximum number of alerts returned by alert-only endpoint."
    },
    {
      "fieldname": "inventory_alert_critical_ratio",
      "fieldtype": "Float",
      "label": "Critical Ratio",
      "default": "0.35",
      "description": "Critical threshold multiplier against reorder level."
    },
    {
      "fieldname": "inventory_alert_low_ratio",
      "fieldtype": "Float",
      "label": "Low Ratio",
      "default": "1.0",
      "description": "Low threshold multiplier against reorder level (must be >= Critical Ratio)."
    },
    {
      "fieldname": "inventory_alert_rules",
      "fieldtype": "Table",
      "label": "Alert Rules",
      "options": "ERPNext POS Inventory Alert Rule",
      "description": "Optional overrides by Warehouse and Item Group. Lower priority applies first."
    }
  ],
  "permissions": [
    {
      "role": "System Manager",
      "read": 1,
      "write": 1,
      "create": 1
    },
    {
      "role": "POS",
      "read": 1,
      "write": 1
    },
    {
      "role": "POS User",
      "read": 1,
      "write": 1
    }
  ]
}
